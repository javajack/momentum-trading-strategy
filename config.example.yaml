# FORTRESS MOMENTUM Configuration Example
# Copy this file to config.yaml and fill in your credentials
# Alternatively, set environment variables: ZERODHA_API_KEY, ZERODHA_API_SECRET

# Zerodha API credentials (required)
# SECURITY: Use environment variables instead of storing credentials in this file
zerodha:
  api_key: "YOUR_API_KEY_HERE"
  api_secret: "YOUR_API_SECRET_HERE"

# Portfolio settings
portfolio:
  initial_capital: 2000000
  max_positions: 20

# Pure Momentum Strategy Settings (Nifty 500 Momentum 50 style)
# OPTIMIZED: Balanced for all market conditions
pure_momentum:
  # NMS calculation parameters
  lookback_6m: 126 # 6-month lookback (trading days)
  lookback_12m: 252 # 12-month lookback (trading days)
  lookback_volatility: 126 # Volatility calculation window
  skip_recent_days: 5 # Skip recent days to avoid reversal
  weight_6m: 0.50 # 50% weight to 6M adjusted return
  weight_12m: 0.50 # 50% weight to 12M adjusted return

  # Entry filters (all must pass)
  min_score_percentile: 95 # Top 5% by NMS for entry consideration
  min_52w_high_prox: 0.85 # Price >= 85% of 52-week high
  min_volume_ratio: 1.1 # 20-day volume > 50-day x 1.1
  min_daily_turnover: 20000000 # Rs 2 Cr minimum daily turnover

  # Exit triggers
  min_hold_percentile: 50 # Exit if NMS falls below 50th percentile
  max_days_without_gain: 60 # Exit after 60 days without +10% gain
  min_gain_threshold: 0.10 # Target gain for time-based exit check

# Position sizing - OPTIMIZED for quality over quantity
position_sizing:
  method: "momentum_weighted" # "equal", "momentum_weighted", or "inverse_volatility"
  max_single_position: 0.10 # 10% max per position (allow conviction bets)
  min_single_position: 0.04 # 4% min per position (meaningful positions)
  max_sector_exposure: 0.30 # 30% max per sector
  target_positions: 12 # Target 12 positions (quality focus)
  min_positions: 10 # Maintain at least 10 positions
  max_positions: 15 # Never exceed 15 positions

# Rebalancing schedule (monthly proven optimal)
rebalancing:
  frequency: "monthly"
  rebalance_days: 21 # Trading days between rebalances (21 = monthly)
  day: "friday"
  min_trade_value: 10000

# Risk limits with stop losses
risk:
  # Position limits
  max_single_position: 0.10
  hard_max_position: 0.12
  max_sector_exposure: 0.25
  hard_max_sector: 0.30

  # Drawdown limits
  max_drawdown_warning: 0.10
  max_drawdown_halt: 0.20
  daily_loss_limit: 0.03

  # Stop losses - BALANCED (wider stops reduce whipsaws)
  initial_stop_loss: 0.18 # 18% initial stop loss
  trailing_stop: 0.15 # 15% trailing stop
  trailing_activation: 0.08 # Activate trailing after +8% gain

# Transaction costs
costs:
  transaction_cost: 0.003

# Market Regime Detection - AGILE (faster recovery without compromising safety)
regime:
  enabled: true

  # Multi-timeframe lookbacks
  lookback_short: 21
  lookback_medium: 63
  lookback_long: 126

  # REBALANCED weights (30/35/35 - increased short-term responsiveness)
  weight_short: 0.30
  weight_medium: 0.35
  weight_long: 0.35

  # Entry thresholds
  bullish_threshold: 0.65
  caution_threshold: 0.45
  defensive_threshold: 0.25

  # Recovery thresholds
  bullish_recovery_threshold: 0.70
  normal_recovery_threshold: 0.52
  caution_recovery_threshold: 0.32

  # Hysteresis
  upgrade_confirmation_days: 3
  downgrade_confirmation_days: 4

  # Position momentum settings
  use_position_momentum: true
  position_momentum_period: 5
  position_momentum_recovery_bonus: 0.05

  # VIX recovery accelerator
  use_vix_recovery_accelerator: true
  vix_recovery_spike_threshold: 25.0
  vix_recovery_decline_rate: 0.10
  vix_recovery_bonus: 0.03

  # Adaptive hysteresis
  adaptive_hysteresis: true
  strong_signal_bonus: 0.10

  # Short-term return settings
  use_return_10d: true
  return_10d_weight: 0.15

  # VIX thresholds
  vix_elevated: 18.0
  vix_caution: 22.0
  vix_defensive: 28.0
  vix_normal: 16.0
  vix_calm: 14.0

  # Return thresholds
  return_warning: -0.03
  return_caution: -0.05
  return_defensive: -0.10
  return_recovery_normal: 0.03
  return_recovery_bullish: 0.08

  # Graduated allocation settings
  use_graduated_allocation: true
  min_equity_allocation: 0.50
  max_gold_allocation: 0.25
  max_cash_allocation: 0.25
  allocation_curve_steepness: 2.0

  # Fixed allocation - CAUTION regime
  caution_equity: 0.80
  caution_gold: 0.10
  caution_cash: 0.10

  # Fixed allocation - DEFENSIVE regime
  defensive_equity: 0.60
  defensive_gold: 0.20
  defensive_cash: 0.20

  # Defensive instruments
  gold_symbol: "GOLDBEES"
  cash_symbol: "LIQUIDCASE"

# Paths
paths:
  universe_file: "stock-universe.json"
  log_dir: "logs"
  data_cache: ".cache"

# Strategy selection (only dual_momentum is supported)
active_strategy: "dual_momentum"

# Excluded symbols (ETFs, liquid funds)
excluded_symbols:
  - LIQUIDCASE
  - LIQUIDBEES
  - NIFTYBEES
  - JUNIORBEES
  - MID150BEES
  - HDFCSML250
  - GOLDBEES
  - HANGSENGBEES
